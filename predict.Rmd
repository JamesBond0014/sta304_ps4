---
title: "predict"
author: "James Bao"
date: "11/1/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
cell_counts <- readRDS("inputs/cell_counts.RDS")
model <- readRDS("model/4chains_3000iter_.rds")
```

```{r}
overall_prop <- cell_counts %>%
  mutate(prop = n/sum(n))

overall_prop


```


```{r}
overall_prop$predict <- predict(model, type = "response", newdata = overall_prop)[,1]
nrow(overall_prop$predict)
```

```{r}
overall_prop$vote <- ifelse(overall_prop$predict >0.5, 1, 0)
```

```{r}
overall_prop$vote_weight <- overall_prop$vote * overall_prop$prop

```

```{r}
head(overall_prop$vote_weight)

```


